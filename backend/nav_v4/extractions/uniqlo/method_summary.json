{
  "brand": "uniqlo",
  "url": "https://www.uniqlo.com/us/en/",
  "extraction_method": "redux_state",
  "data_path": "window.__PRELOADED_STATE__.taxonomies",
  "requires_browser_context": true,
  "subcategory_key": "parents (inverse hierarchy)",
  "url_template": "https://www.uniqlo.com/us/en/{genderKey}/{classKey}/{categoryKey}",
  "filters": null,
  "stats": {
    "total_categories": 2036,
    "max_depth": 4,
    "top_level_count": 4,
    "level_distribution": {
      "genders": 4,
      "classes": 39,
      "categories": 172,
      "subcategories": 1825
    }
  },
  "notes": "Uses Redux store with __PRELOADED_STATE__. Taxonomy data uses inverse parent references rather than children arrays. Tree must be built by grouping items by parent IDs.",
  "extraction_script": "async function extractNavigation() {\n  // Find __PRELOADED_STATE__ in script tags\n  const scripts = document.querySelectorAll('script');\n  let taxonomies = null;\n  \n  for (const script of scripts) {\n    const text = script.textContent || '';\n    if (text.includes('__PRELOADED_STATE__')) {\n      const startIdx = text.indexOf('window.__PRELOADED_STATE__');\n      if (startIdx === -1) continue;\n      \n      const jsonStart = text.indexOf('=', startIdx) + 1;\n      let braceCount = 0, jsonEnd = jsonStart, inString = false, escape = false;\n      \n      for (let i = jsonStart; i < text.length; i++) {\n        const char = text[i];\n        if (escape) { escape = false; continue; }\n        if (char === '\\\\') { escape = true; continue; }\n        if (char === '\"' && !escape) { inString = !inString; continue; }\n        if (!inString) {\n          if (char === '{') braceCount++;\n          if (char === '}') {\n            braceCount--;\n            if (braceCount === 0) { jsonEnd = i + 1; break; }\n          }\n        }\n      }\n      \n      try {\n        const state = JSON.parse(text.substring(jsonStart, jsonEnd).trim());\n        taxonomies = state.taxonomies;\n        break;\n      } catch (e) { continue; }\n    }\n  }\n  \n  if (!taxonomies) return [];\n  \n  const { genders, classes, categories, subcategories } = taxonomies;\n  const classesById = {};\n  const categoriesById = {};\n  const genderMap = {};\n  \n  // Group classes by gender\n  genders.forEach(g => {\n    genderMap[g.id] = { name: g.name, url: `https://www.uniqlo.com/us/en/${g.genderKey}`, children: [] };\n  });\n  \n  (classes || []).forEach(cls => {\n    const genderId = cls.parents?.[0]?.id;\n    if (genderId && genderMap[genderId]) {\n      const classNode = { name: cls.name, url: `https://www.uniqlo.com/us/en/${cls.parents[0].key}/${cls.key}`, children: [] };\n      genderMap[genderId].children.push(classNode);\n      classesById[cls.id] = classNode;\n    }\n  });\n  \n  (categories || []).forEach(cat => {\n    const classId = cat.parents?.[1]?.id;\n    if (classId && classesById[classId]) {\n      const catNode = { name: cat.name, url: `https://www.uniqlo.com/us/en/${cat.parents[0].key}/${cat.parents[1].key}/${cat.key}`, children: [] };\n      classesById[classId].children.push(catNode);\n      categoriesById[cat.id] = catNode;\n    }\n  });\n  \n  (subcategories || []).forEach(sub => {\n    const catId = sub.parents?.[2]?.id;\n    if (catId && categoriesById[catId]) {\n      categoriesById[catId].children.push({\n        name: sub.name,\n        url: `https://www.uniqlo.com/us/en/${sub.parents[0].key}/${sub.parents[1].key}/${sub.parents[2].key}/${sub.key}`,\n        children: []\n      });\n    }\n  });\n  \n  return Object.values(genderMap);\n}"
}
