{"ast":null,"code":"var _jsxFileName = \"/Users/bhavyajain/Code/fashion_archive/web_ui/src/components/VideoModal.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport { FashionArchiveAPI } from '../services/api';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction VideoModal({\n  videoPath,\n  onClose\n}) {\n  _s();\n  const [position, setPosition] = useState({\n    x: 50,\n    y: 100\n  });\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragOffset, setDragOffset] = useState({\n    x: 0,\n    y: 0\n  });\n  const windowRef = useRef(null);\n\n  // Handle escape key to close (matches tkinter behavior)\n  useEffect(() => {\n    const handleKeyPress = e => {\n      if (e.key === 'Escape') {\n        onClose();\n      }\n    };\n    window.addEventListener('keydown', handleKeyPress);\n    return () => window.removeEventListener('keydown', handleKeyPress);\n  }, [onClose]);\n\n  // Dragging functionality (matches tkinter moveable window)\n  const handleMouseDown = e => {\n    if (windowRef.current) {\n      const rect = windowRef.current.getBoundingClientRect();\n      setDragOffset({\n        x: e.clientX - rect.left,\n        y: e.clientY - rect.top\n      });\n      setIsDragging(true);\n    }\n  };\n  useEffect(() => {\n    let rafId = null;\n    const handleMouseMove = e => {\n      if (isDragging) {\n        // Use requestAnimationFrame to prevent ResizeObserver issues\n        if (rafId) cancelAnimationFrame(rafId);\n        rafId = requestAnimationFrame(() => {\n          // Constrain window to viewport bounds\n          const newX = Math.max(0, Math.min(window.innerWidth - 400, e.clientX - dragOffset.x));\n          const newY = Math.max(0, Math.min(window.innerHeight - 100, e.clientY - dragOffset.y));\n          setPosition({\n            x: newX,\n            y: newY\n          });\n        });\n      }\n    };\n    const handleMouseUp = () => {\n      setIsDragging(false);\n      if (rafId) {\n        cancelAnimationFrame(rafId);\n        rafId = null;\n      }\n    };\n    if (isDragging) {\n      document.addEventListener('mousemove', handleMouseMove, {\n        passive: true\n      });\n      document.addEventListener('mouseup', handleMouseUp);\n    }\n    return () => {\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n      if (rafId) cancelAnimationFrame(rafId);\n    };\n  }, [isDragging, dragOffset]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: windowRef,\n      className: \"video-window\",\n      style: {\n        position: 'fixed',\n        left: `${position.x}px`,\n        top: `${position.y}px`,\n        backgroundColor: 'var(--mac-bg)',\n        border: '2px outset var(--mac-bg)',\n        boxShadow: '4px 4px 8px rgba(0,0,0,0.4)',\n        zIndex: 2000,\n        minWidth: '400px',\n        maxWidth: '800px',\n        userSelect: 'none' // Prevent text selection during drag\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mac-title-bar\",\n        onMouseDown: handleMouseDown,\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          cursor: isDragging ? 'grabbing' : 'grab',\n          padding: '4px 8px',\n          backgroundColor: 'var(--mac-bg)',\n          borderBottom: '1px solid var(--mac-border)'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            fontSize: '12px'\n          },\n          children: \"Fashion Show Video\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"mac-button\",\n          style: {\n            padding: '0 6px',\n            fontSize: '10px',\n            minWidth: 'auto'\n          },\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '8px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"video\", {\n          controls: true,\n          autoPlay: true,\n          style: {\n            display: 'block',\n            maxWidth: '760px',\n            maxHeight: '500px',\n            width: '100%',\n            border: '1px solid var(--mac-border)'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"source\", {\n            src: FashionArchiveAPI.getVideoUrl(videoPath),\n            type: \"video/mp4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, this), \"Your browser does not support the video tag.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n_s(VideoModal, \"yMx2jbftX6WOkTlYiH26yoLrci4=\");\n_c = VideoModal;\nexport default VideoModal;\nvar _c;\n$RefreshReg$(_c, \"VideoModal\");","map":{"version":3,"names":["React","useEffect","useState","useRef","FashionArchiveAPI","jsxDEV","_jsxDEV","Fragment","_Fragment","VideoModal","videoPath","onClose","_s","position","setPosition","x","y","isDragging","setIsDragging","dragOffset","setDragOffset","windowRef","handleKeyPress","e","key","window","addEventListener","removeEventListener","handleMouseDown","current","rect","getBoundingClientRect","clientX","left","clientY","top","rafId","handleMouseMove","cancelAnimationFrame","requestAnimationFrame","newX","Math","max","min","innerWidth","newY","innerHeight","handleMouseUp","document","passive","children","ref","className","style","backgroundColor","border","boxShadow","zIndex","minWidth","maxWidth","userSelect","onMouseDown","display","justifyContent","cursor","padding","borderBottom","fontSize","fileName","_jsxFileName","lineNumber","columnNumber","onClick","controls","autoPlay","maxHeight","width","src","getVideoUrl","type","_c","$RefreshReg$"],"sources":["/Users/bhavyajain/Code/fashion_archive/web_ui/src/components/VideoModal.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { FashionArchiveAPI } from '../services/api';\n\nfunction VideoModal({ videoPath, onClose }) {\n  const [position, setPosition] = useState({ x: 50, y: 100 });\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });\n  const windowRef = useRef(null);\n\n  // Handle escape key to close (matches tkinter behavior)\n  useEffect(() => {\n    const handleKeyPress = (e) => {\n      if (e.key === 'Escape') {\n        onClose();\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyPress);\n    return () => window.removeEventListener('keydown', handleKeyPress);\n  }, [onClose]);\n\n  // Dragging functionality (matches tkinter moveable window)\n  const handleMouseDown = (e) => {\n    if (windowRef.current) {\n      const rect = windowRef.current.getBoundingClientRect();\n      setDragOffset({\n        x: e.clientX - rect.left,\n        y: e.clientY - rect.top\n      });\n      setIsDragging(true);\n    }\n  };\n\n  useEffect(() => {\n    let rafId = null;\n    \n    const handleMouseMove = (e) => {\n      if (isDragging) {\n        // Use requestAnimationFrame to prevent ResizeObserver issues\n        if (rafId) cancelAnimationFrame(rafId);\n        \n        rafId = requestAnimationFrame(() => {\n          // Constrain window to viewport bounds\n          const newX = Math.max(0, Math.min(window.innerWidth - 400, e.clientX - dragOffset.x));\n          const newY = Math.max(0, Math.min(window.innerHeight - 100, e.clientY - dragOffset.y));\n          \n          setPosition({ x: newX, y: newY });\n        });\n      }\n    };\n\n    const handleMouseUp = () => {\n      setIsDragging(false);\n      if (rafId) {\n        cancelAnimationFrame(rafId);\n        rafId = null;\n      }\n    };\n\n    if (isDragging) {\n      document.addEventListener('mousemove', handleMouseMove, { passive: true });\n      document.addEventListener('mouseup', handleMouseUp);\n    }\n\n    return () => {\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n      if (rafId) cancelAnimationFrame(rafId);\n    };\n  }, [isDragging, dragOffset]);\n\n  return (\n    <>\n      {/* Video window - separate draggable window (matches tkinter separate window) */}\n      <div \n        ref={windowRef}\n        className=\"video-window\" \n        style={{\n          position: 'fixed',\n          left: `${position.x}px`,\n          top: `${position.y}px`,\n          backgroundColor: 'var(--mac-bg)',\n          border: '2px outset var(--mac-bg)',\n          boxShadow: '4px 4px 8px rgba(0,0,0,0.4)',\n          zIndex: 2000,\n          minWidth: '400px',\n          maxWidth: '800px',\n          userSelect: 'none' // Prevent text selection during drag\n        }}\n      >\n        {/* Title bar with drag handle */}\n        <div \n          className=\"mac-title-bar\" \n          onMouseDown={handleMouseDown}\n          style={{ \n            display: 'flex', \n            justifyContent: 'space-between',\n            cursor: isDragging ? 'grabbing' : 'grab',\n            padding: '4px 8px',\n            backgroundColor: 'var(--mac-bg)',\n            borderBottom: '1px solid var(--mac-border)'\n          }}\n        >\n          <span style={{ fontSize: '12px' }}>Fashion Show Video</span>\n          <button \n            onClick={onClose}\n            className=\"mac-button\"\n            style={{ \n              padding: '0 6px',\n              fontSize: '10px',\n              minWidth: 'auto'\n            }}\n          >\n            âœ•\n          </button>\n        </div>\n        \n        {/* Video player - simple HTML5 video */}\n        <div style={{ padding: '8px' }}>\n          <video \n            controls \n            autoPlay\n            style={{ \n              display: 'block',\n              maxWidth: '760px',\n              maxHeight: '500px',\n              width: '100%',\n              border: '1px solid var(--mac-border)'\n            }}\n          >\n            <source src={FashionArchiveAPI.getVideoUrl(videoPath)} type=\"video/mp4\" />\n            Your browser does not support the video tag.\n          </video>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default VideoModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}