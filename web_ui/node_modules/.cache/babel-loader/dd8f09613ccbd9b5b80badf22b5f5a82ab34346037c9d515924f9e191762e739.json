{"ast":null,"code":"var _jsxFileName = \"/Users/bhavyajain/Code/fashion_archive/web_ui/src/components/VideoModal.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport { FashionArchiveAPI } from '../services/api';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction VideoModal({\n  videoPath,\n  onClose\n}) {\n  _s();\n  // Initialize position safely within viewport\n  const [position, setPosition] = useState(() => {\n    const safeX = typeof window !== 'undefined' ? Math.max(50, window.innerWidth - 450) : 50;\n    const safeY = typeof window !== 'undefined' ? Math.max(100, Math.min(150, window.innerHeight - 400)) : 100;\n    return {\n      x: safeX,\n      y: safeY\n    };\n  });\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragOffset, setDragOffset] = useState({\n    x: 0,\n    y: 0\n  });\n  const windowRef = useRef(null);\n\n  // Handle escape key to close (matches tkinter behavior)\n  useEffect(() => {\n    const handleKeyPress = e => {\n      if (e.key === 'Escape') {\n        onClose();\n      }\n    };\n    window.addEventListener('keydown', handleKeyPress);\n    return () => window.removeEventListener('keydown', handleKeyPress);\n  }, [onClose]);\n\n  // Dragging functionality (matches tkinter moveable window)\n  const handleMouseDown = e => {\n    if (windowRef.current) {\n      const rect = windowRef.current.getBoundingClientRect();\n      setDragOffset({\n        x: e.clientX - rect.left,\n        y: e.clientY - rect.top\n      });\n      setIsDragging(true);\n    }\n  };\n  useEffect(() => {\n    let rafId = null;\n    const handleMouseMove = e => {\n      if (isDragging) {\n        // Use requestAnimationFrame to prevent ResizeObserver issues\n        if (rafId) cancelAnimationFrame(rafId);\n        rafId = requestAnimationFrame(() => {\n          // Constrain window to viewport bounds\n          const newX = Math.max(0, Math.min(window.innerWidth - 400, e.clientX - dragOffset.x));\n          const newY = Math.max(0, Math.min(window.innerHeight - 100, e.clientY - dragOffset.y));\n          setPosition({\n            x: newX,\n            y: newY\n          });\n        });\n      }\n    };\n    const handleMouseUp = () => {\n      setIsDragging(false);\n      if (rafId) {\n        cancelAnimationFrame(rafId);\n        rafId = null;\n      }\n    };\n    if (isDragging) {\n      document.addEventListener('mousemove', handleMouseMove, {\n        passive: true\n      });\n      document.addEventListener('mouseup', handleMouseUp);\n    }\n    return () => {\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n      if (rafId) cancelAnimationFrame(rafId);\n    };\n  }, [isDragging, dragOffset]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: windowRef,\n      className: \"video-window\",\n      style: {\n        position: 'fixed',\n        left: `${position.x}px`,\n        top: `${position.y}px`,\n        backgroundColor: 'var(--mac-bg)',\n        border: '2px outset var(--mac-bg)',\n        boxShadow: '4px 4px 8px rgba(0,0,0,0.4)',\n        zIndex: 2000,\n        minWidth: '400px',\n        maxWidth: '800px',\n        userSelect: 'none' // Prevent text selection during drag\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mac-title-bar\",\n        onMouseDown: handleMouseDown,\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          cursor: isDragging ? 'grabbing' : 'grab',\n          padding: '4px 8px',\n          backgroundColor: 'var(--mac-bg)',\n          borderBottom: '1px solid var(--mac-border)'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            fontSize: '12px'\n          },\n          children: \"Fashion Show Video\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"mac-button\",\n          style: {\n            padding: '0 6px',\n            fontSize: '10px',\n            minWidth: 'auto'\n          },\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '8px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"video\", {\n          controls: true,\n          autoPlay: true,\n          style: {\n            display: 'block',\n            maxWidth: '760px',\n            maxHeight: '500px',\n            width: '100%',\n            border: '1px solid var(--mac-border)'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"source\", {\n            src: FashionArchiveAPI.getVideoUrl(videoPath),\n            type: \"video/mp4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 13\n          }, this), \"Your browser does not support the video tag.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n_s(VideoModal, \"rWi9uBwNS4+wMzgIqXgtCk3DiAc=\");\n_c = VideoModal;\nexport default VideoModal;\nvar _c;\n$RefreshReg$(_c, \"VideoModal\");","map":{"version":3,"names":["React","useEffect","useState","useRef","FashionArchiveAPI","jsxDEV","_jsxDEV","Fragment","_Fragment","VideoModal","videoPath","onClose","_s","position","setPosition","safeX","window","Math","max","innerWidth","safeY","min","innerHeight","x","y","isDragging","setIsDragging","dragOffset","setDragOffset","windowRef","handleKeyPress","e","key","addEventListener","removeEventListener","handleMouseDown","current","rect","getBoundingClientRect","clientX","left","clientY","top","rafId","handleMouseMove","cancelAnimationFrame","requestAnimationFrame","newX","newY","handleMouseUp","document","passive","children","ref","className","style","backgroundColor","border","boxShadow","zIndex","minWidth","maxWidth","userSelect","onMouseDown","display","justifyContent","cursor","padding","borderBottom","fontSize","fileName","_jsxFileName","lineNumber","columnNumber","onClick","controls","autoPlay","maxHeight","width","src","getVideoUrl","type","_c","$RefreshReg$"],"sources":["/Users/bhavyajain/Code/fashion_archive/web_ui/src/components/VideoModal.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { FashionArchiveAPI } from '../services/api';\n\nfunction VideoModal({ videoPath, onClose }) {\n  // Initialize position safely within viewport\n  const [position, setPosition] = useState(() => {\n    const safeX = typeof window !== 'undefined' ? Math.max(50, window.innerWidth - 450) : 50;\n    const safeY = typeof window !== 'undefined' ? Math.max(100, Math.min(150, window.innerHeight - 400)) : 100;\n    return { x: safeX, y: safeY };\n  });\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });\n  const windowRef = useRef(null);\n\n  // Handle escape key to close (matches tkinter behavior)\n  useEffect(() => {\n    const handleKeyPress = (e) => {\n      if (e.key === 'Escape') {\n        onClose();\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyPress);\n    return () => window.removeEventListener('keydown', handleKeyPress);\n  }, [onClose]);\n\n  // Dragging functionality (matches tkinter moveable window)\n  const handleMouseDown = (e) => {\n    if (windowRef.current) {\n      const rect = windowRef.current.getBoundingClientRect();\n      setDragOffset({\n        x: e.clientX - rect.left,\n        y: e.clientY - rect.top\n      });\n      setIsDragging(true);\n    }\n  };\n\n  useEffect(() => {\n    let rafId = null;\n    \n    const handleMouseMove = (e) => {\n      if (isDragging) {\n        // Use requestAnimationFrame to prevent ResizeObserver issues\n        if (rafId) cancelAnimationFrame(rafId);\n        \n        rafId = requestAnimationFrame(() => {\n          // Constrain window to viewport bounds\n          const newX = Math.max(0, Math.min(window.innerWidth - 400, e.clientX - dragOffset.x));\n          const newY = Math.max(0, Math.min(window.innerHeight - 100, e.clientY - dragOffset.y));\n          \n          setPosition({ x: newX, y: newY });\n        });\n      }\n    };\n\n    const handleMouseUp = () => {\n      setIsDragging(false);\n      if (rafId) {\n        cancelAnimationFrame(rafId);\n        rafId = null;\n      }\n    };\n\n    if (isDragging) {\n      document.addEventListener('mousemove', handleMouseMove, { passive: true });\n      document.addEventListener('mouseup', handleMouseUp);\n    }\n\n    return () => {\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n      if (rafId) cancelAnimationFrame(rafId);\n    };\n  }, [isDragging, dragOffset]);\n\n  return (\n    <>\n      {/* Video window - separate draggable window (matches tkinter separate window) */}\n      <div \n        ref={windowRef}\n        className=\"video-window\" \n        style={{\n          position: 'fixed',\n          left: `${position.x}px`,\n          top: `${position.y}px`,\n          backgroundColor: 'var(--mac-bg)',\n          border: '2px outset var(--mac-bg)',\n          boxShadow: '4px 4px 8px rgba(0,0,0,0.4)',\n          zIndex: 2000,\n          minWidth: '400px',\n          maxWidth: '800px',\n          userSelect: 'none' // Prevent text selection during drag\n        }}\n      >\n        {/* Title bar with drag handle */}\n        <div \n          className=\"mac-title-bar\" \n          onMouseDown={handleMouseDown}\n          style={{ \n            display: 'flex', \n            justifyContent: 'space-between',\n            cursor: isDragging ? 'grabbing' : 'grab',\n            padding: '4px 8px',\n            backgroundColor: 'var(--mac-bg)',\n            borderBottom: '1px solid var(--mac-border)'\n          }}\n        >\n          <span style={{ fontSize: '12px' }}>Fashion Show Video</span>\n          <button \n            onClick={onClose}\n            className=\"mac-button\"\n            style={{ \n              padding: '0 6px',\n              fontSize: '10px',\n              minWidth: 'auto'\n            }}\n          >\n            ✕\n          </button>\n        </div>\n        \n        {/* Video player - simple HTML5 video */}\n        <div style={{ padding: '8px' }}>\n          <video \n            controls \n            autoPlay\n            style={{ \n              display: 'block',\n              maxWidth: '760px',\n              maxHeight: '500px',\n              width: '100%',\n              border: '1px solid var(--mac-border)'\n            }}\n          >\n            <source src={FashionArchiveAPI.getVideoUrl(videoPath)} type=\"video/mp4\" />\n            Your browser does not support the video tag.\n          </video>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default VideoModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}